# vLLM Engine 架构图表

本目录包含了vLLM Engine架构的详细图表，帮助理解系统的各个组件和工作流程。

## 图表列表

### 1. 整体系统架构图
展示了vLLM的分层架构，包括：
- 客户端层 (CLI, API, LLM类)
- 引擎层 (异步/同步引擎)
- 核心组件 (调度器、输入/输出处理器、分词器)
- 内存管理 (块管理器、KV缓存、缓存引擎)
- 模型执行 (执行器、工作进程、模型运行器)

### 2. 请求处理流程图
时序图展示了一个推理请求从接收到完成的完整生命周期：
- 请求接收和预处理
- 调度决策和内存分配
- 模型执行和并行处理
- 输出处理和结果返回

### 3. 核心组件交互图
详细展示了请求在各个组件间的流转：
- 输入处理流水线
- 调度器的三队列管理
- 内存管理和块分配
- 模型执行和采样
- 输出处理流程

## 如何使用这些图表

### 1. 学习架构
- 从整体架构图开始，了解系统的主要组件
- 通过流程图理解数据和请求的流转
- 使用交互图深入了解组件间的协作

### 2. 开发参考
- 确定要修改的组件位置
- 理解组件间的依赖关系
- 规划新功能的集成点

### 3. 问题排查
- 根据问题类型定位相关组件
- 追踪数据流找到潜在的瓶颈
- 分析组件交互找到错误源

## 图表更新

当vLLM架构发生重大变化时，这些图表应该相应更新：

1. **新增组件**: 更新架构图，添加新组件及其连接
2. **流程变化**: 修改时序图，反映新的处理流程
3. **接口变化**: 更新交互图，显示新的组件接口

## 工具推荐

### 图表编辑工具
- **Mermaid**: 用于代码形式的图表 (推荐)
- **Draw.io**: 在线图表编辑器
- **Lucidchart**: 专业图表工具
- **PlantUML**: 基于文本的UML图表

### 在线预览
- [Mermaid Live Editor](https://mermaid.live/)
- [Draw.io](https://app.diagrams.net/)

## 参考资源

- [vLLM官方文档](https://docs.vllm.ai/)
- [vLLM GitHub仓库](https://github.com/vllm-project/vllm)
- [PagedAttention论文](https://arxiv.org/abs/2309.06180)

---

这些图表是理解vLLM架构的关键工具，建议结合主教程文档一起学习。 